<!DOCTYPE html>Â 
<html>
Â  Â  <head>
Â  Â  Â  Â  <meta charset="utf-8">
Â  Â  Â  Â  <title>Clash of Tanks</title>
Â  Â  Â  Â  <style type="text/css">
Â  Â  Â  Â  Â  body {
Â  Â  margin: 0;
Â  Â  padding-top: 50%;
Â  Â  position: relative;
}

#main {
Â  Â  Â  Â Â 
Â  Â  padding: 20px;
Â  Â  box-shadow: 0 0 100px 80px Â lightblue;
Â  Â  background: lightblue;
Â  Â  text-align: center;
Â  Â Â 
}

.smoke-base {
Â position Â  Â  Â  Â  : absolute;
Â left Â  Â  Â  Â  Â  Â  : 0%;
Â top Â  Â  Â  Â  Â  Â  Â : 0%;
Â width Â  Â  Â  Â  Â  Â : 100%;
Â height Â  Â  Â  Â  Â  : 100%;
Â background-color : rgba(0,0,0,.4);
Â display Â  Â  Â  Â  Â : table;
Â z-index Â  Â  Â  Â  Â : 1001;
}

.smoke-dialog_wrapper {
Â position Â  Â  Â  : relative;
Â vertical-align : middle;
Â display Â  Â  Â  Â : table-cell;
}

.smoke-dialog {
Â width Â  Â  Â  Â  Â  Â : 80%;
Â margin Â  Â  Â  Â  Â  : 0 auto;
Â padding Â  Â  Â  Â  Â : 20px;
Â color Â  Â  Â  Â  Â  Â : #202020;
Â border Â  Â  Â  Â  Â  : 1px solid #B6B6B6;
Â border-radius Â  Â : 28px;
Â background-color : #f3f3f3;
Â font-family Â  Â  Â : Arial;
Â font-size Â  Â  Â  Â : 18px;
Â font-weight Â  Â  Â : normal;
Â text-align Â  Â  Â  : center;
Â line-height: 24px;
}

.smoke-dialog-buttons {
Â vertical-align : middle;
Â  Â  margin-top: 10px;
}

.smoke-dialog-buttons-ok, .smoke-dialog-buttons-cancel {
Â  Â  margin: 0 7px;
Â  Â  padding: 8px 24px;
Â  Â  border: 0;
Â  Â  border-radius: 7px;
Â  Â  outline: 0;
Â  Â  color: white;
Â  Â  background: #00BD20;
Â  Â  font-family: arial;
Â  Â  font-size: 14px;
Â  Â  font-weight: normal;
Â  Â  text-transform: none;
Â  Â  line-height: 18px;
Â  Â  vertical-align: baseline;
Â  Â  display: inline-block;
Â  Â  cursor: pointer;
}
.smoke-dialog-buttons-ok:hover, .smoke-dialog-buttons-cancel:hover {
Â  background: #222;
}

.smoke-prompt {
Â margin-top : 15px;
Â text-align : center;
}

.smoke-prompt-input {
Â -moz-box-sizing Â : border-box;
Â box-sizing Â  Â  Â  : border-box;
Â width Â  Â  Â  Â  Â  Â : 75%;
Â margin Â  Â  Â  Â  Â  : 0;
Â padding Â  Â  Â  Â  Â : 11.2px;
Â border Â  Â  Â  Â  Â  : 1.4px solid #aaa;
Â outline Â  Â  Â  Â  Â : none;
Â font-family Â  Â  Â : arial;
Â font-size Â  Â  Â  Â : 22.4px;
Â background-color : white;
Â display Â  Â  Â  Â  Â : inline-block;
}

.smoke-dialog-buttons-cancel {
Â background-color : rgba(0, 0, 0, .40);
}


.dif {
Â  Â  display: inline-block ;
Â  Â  margin-top: 8px;
Â  Â  margin-left: 14px;
Â  Â  margin-right: -12px;
Â  Â  font-weight: bold;
Â  Â  font-size: 2em;
Â  Â  width: 95px;
}

#log {
Â  Â display:none;
Â  Â position: relative;
Â  Â font-weight: bolder;
Â  Â font-size: 0.8em;
Â  Â text-align: center;
}

.win{
Â  Â margin-top: -10px;
Â  Â color: green;
}

.loss{
Â  Â margin-top: -10px;
Â  Â color: red;
}

canvas {
Â  Â  position: fixed;
Â  Â  display: block;Â 
Â  Â  border: 3px solid #eee;
Â  Â  margin: auto;
Â  Â  border-radius: 7px;
Â  Â  box-shadow: 0 0 15px;
-webkit-box-shadow: 0px 5px 21px 10px rgba(0,0,0,0.66);
-moz-box-shadow: 0px 5px 21px 10px rgba(0,0,0,0.66);
box-shadow: 0px 5px 21px 10px rgba(0,0,0,0.66);

}
#start{
Â  Â  color: green;
Â  Â  margin-bottom: 10px;
}
#info {
Â  Â  color: red;
}
button {
Â  Â  width: 300px;
Â  Â  height: 50px;
Â  Â  font-size: 1.75em;
Â  Â  border:1px solid white;
Â  Â  border-radius: 7px;
Â  Â  box-shadow: 0 0 5px, inset 0 0 25px;
Â  Â  padding: 10px 40px;
Â  Â  background-color: #f3f3f3;
Â  Â  font-weight: bold;
Â  Â  outline-style: none;

}

#btn-left, #btn-right {
Â  Â  border-radius: 50%;
Â  Â  padding: 0 20px ;
Â  Â  font-size: 2em;
}

#infdiv {
Â  Â  display:none;
Â  Â  position: relative;
Â  Â  margin-auto
Â  Â  width: 80%;
Â  Â  border: 3px solid lightblue;
Â  Â  background-color: white;
Â  Â  padding: 10px;
Â  Â  text-align: center;
Â  Â  border-radius: 10px;
Â  Â  box-shadow: 0 0 20px;
Â  Â  font-weight: bolder;
Â  Â  font-size: 0.9em;
}

.modal {
Â  border-radius: 10px;
Â  display: none;Â 
Â  position: relative;
Â  z-index: 99;Â 
Â  overflow: auto;
Â  background-color: rgba(0,100,0,0.5);Â 
}


.modal-content {
Â  color: white;
Â  background-color: rgba(0,100,0,0.4);Â 
Â  margin: 15% auto;Â 
Â  padding: 20px;
Â  border: 2px solid white;
Â  border-radius: 10px;
Â  width: 80%;
Â  text-align: center;
}


.close {
Â  color: #aaa;
Â  float: right;
Â  font-size: 28px;
Â  font-weight: bold;
}

.close:hover,
.close:focus {
Â  color: black;
Â  text-decoration: none;
Â  cursor: pointer;
}
.units{
Â  Â  -webkit-box-shadow: 6px 6px 10px 2px rgba(0,0,0,0.75);
-moz-box-shadow: 6px 6px 10px 2px rgba(0,0,0,0.75);
box-shadow: 6px 6px 10px 2px rgba(0,0,0,0.75);
}


Â  Â  Â  Â  </style>
Â  Â  Â  <script type="text/javascript">
var w, h, k, xo, yo,
units = [],
Â  Â  icons = [],
Â  Â  bullets = [],
Â  Â  enemies = [],
Â  Â  explosions = [],
Â  Â  dif = [' 1', ' 2', ' 3', ' 4', ' 5', ' 6', ' 7', ' 8', ' 9', ' 10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20'],
Â  Â  gameTime = 0,
Â  Â  isGameOver,
Â  Â  nextwave = 0,
Â  Â  enemydep = 1,
Â  Â  firstwave = false,
Â  Â  deployarea = false,
Â  Â  counter = 0,
Â  Â  counter2 = 0,
Â  Â  gameNum = 0,
Â  Â  game_paused = false,
Â  Â  lvl = 0, Â  Â  // 0...9
Â  Â  inf = function ()
Â  Â  {
Â  Â  Â  Â  var popup = document.getElementById('infdiv');
Â  Â  Â  Â  var btn = document.getElementById('info');Â 
Â  Â  Â  Â  if (popup.style.display !== 'block')
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  popup.style.display = 'block';
Â  Â  Â  Â  Â  Â  info.style.color = 'white';
Â  Â  Â  Â  Â  Â  info.style.backgroundColor = 'red';
Â  Â  Â  Â  }
Â  Â  Â  Â  else
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  popup.style.display = 'none';
Â  Â  Â  Â  Â  Â  info.style.color = 'red';
Â  Â  Â  Â  Â  Â  info.style.backgroundColor = '#f3f3f3';
Â  Â  Â  Â  }
Â  Â  },
Â  Â  changeLvl = function (op) {
Â  Â  Â  Â  if (op == 1 && lvl < 19) {
Â  Â  Â  Â  Â  Â  lvl++;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (op == 0 && lvl > 0) { Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  lvl--;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  var _dif = document.getElementsByClassName("dif");
Â  Â  Â  Â  Â  Â  _dif[1].innerHTML = dif[lvl];
Â  Â  };
Â  Â Â 
Â 

(function ()
{
Â  Â  function Sprite(url, pos, size, resized, animspeed, frames, _index, once)
Â  Â  {
Â  Â  Â  Â  this.pos = pos;
Â  Â  Â  Â  this.size = size;
Â  Â  Â  Â  this.resized = resized;
Â  Â  Â  Â  this.url = url;
Â  Â  Â  Â  this.animspeed = animspeed;
Â  Â  Â  Â  this.frames = frames;
Â  Â  Â  Â  this._index = _index;
Â  Â  Â  Â  this.once = once;
Â  Â  }

Â  Â  Sprite.prototype =
Â  Â  {

Â  Â  Â  Â  update: function (dt)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â this._index += this.animspeed * dt;

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  },

Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â render: function (ctx)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  var frame;


Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  if (this.animspeed > 0)
Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  var max = this.frames.length;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  var idx = Math.floor(this._index);Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â frame = this.frames[idx % max];Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (this.once && idx >= max)
Â  Â  Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â this.done = true;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  }Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  }Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â frame = 0;Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  var x = this.pos[0];Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  var y = this.pos[1];Â Â 

Â  Â  Â  Â  Â  Â  Â x += frame * this.size[0];Â Â Â ctx.drawImage(resources.get(this.url), Â x, y, Â this.size[0], this.size[1], Â 0, 0, Â this.resized[0], this.resized[1]);

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  Â Â Â Â 
Â  Â  };

Â  Â  Â Â Â Â window.Sprite = Sprite;
})();

(function ()
{
Â  Â  function Unit(status, pos, hp, speed, maxspeed, range, damage, reload, angle, defaultangle, dir, sprite)
Â  Â  {
Â  Â  Â  Â  this.status = status;
Â  Â  Â  Â  this.pos = pos;
Â  Â  Â  Â  this.hp = hp;
Â  Â  Â  Â  this.maxhp = hp;
Â  Â  Â  Â  this.speed = speed;
Â  Â  Â  Â  this.maxspeed = maxspeed;
Â  Â  Â  Â  this.range = range;
Â  Â  Â  Â  this.damage = damage;
Â  Â  Â  Â  this.reload = reload;
Â  Â  Â  Â  this.angle = angle;
Â  Â  Â  Â  this.defaultangle = defaultangle;
Â  Â  Â  Â  this.dir = dir;
Â  Â  Â  Â  this.sprite = sprite
Â  Â  }

Â  Â  Unit.prototype =
Â  Â  {

Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â getAngle: function (target)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  var x = this.pos[0] - target[0];
Â  Â  Â  Â  Â  Â  var y = this.pos[1] - target[1];
Â  Â  Â  Â  Â  Â  if (x < 0)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  return Math.floor(Math.atan(y / x) * (180 / Math.PI));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  return Math.floor(Math.atan(y / x) * (180 / Math.PI) - 180);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  },

Â  Â  Â  Â  moveAhead: function (dt)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  var rad = this.angle / (180 / Math.PI);
Â  Â  Â  Â  Â  Â  this.pos[0] += Math.cos(rad) * this.speed * dt * this.dir;
Â  Â  Â  Â  Â  Â  this.pos[1] += Math.sin(rad) * this.speed * dt * this.dir;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  },

Â  Â  Â  Â  findTarget: function (t)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  for (i = 0; i < t.length; i++)
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  var dis = this.getDistance(t[i]);
Â  Â  Â  Â  Â  Â  Â  Â  if (dis < this.range && !t[i].destroyed && t[i].time > 0.7 && t[i].pos[1] > k)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.target = t[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.status = "targetfound";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  },

Â  Â  Â  Â  avoidCollision: function (list, ownindx, dt)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  var l = list;

Â  Â  Â  Â  Â  Â  for (i = 0; i < l.length; i++)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  if (i == ownindx) continue;
Â  Â  Â  Â  Â  Â  Â  Â  if (this.getDistance(l[i]) < k * 8)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  for (var sec = 2; sec > 0; sec--) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var ownfuturepos = [this.pos[0] + (Math.cos(this.angle / (180 / Math.PI)) * this.speed * sec * this.dir), this.pos[1] + (Math.sin(this.angle / (180 / Math.PI)) * this.speed * sec * this.dir)];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  var allyfuturepos = [l[i].pos[0] + (Math.cos(l[i].angle / (180 / Math.PI)) * l[i].speed * sec * this.dir), l[i].pos[1] + (Math.sin(l[i].angle / (180 / Math.PI)) * l[i].speed * sec * this.dir)];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (getDistance(ownfuturepos, allyfuturepos) < k * 3 && this.pos[1] * this.dir > l[i].pos[1] * l[i].dir && Math.abs(ownfuturepos[0] - allyfuturepos[0]) < this.sprite.resized[0])
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.speed -= 160/Math.pow(sec, 4) * dt;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â }

Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }


Â  Â  Â  Â  },

Â  Â  Â  Â  getDistance: function (t)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  return Math.floor(Math.sqrt(Math.pow(this.pos[0] - t.pos[0], 2) + Math.pow(this.pos[1] - t.pos[1], 2)));
Â  Â  Â  Â  },

Â  Â  Â  Â  fireOnTarget: function ()
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  var x = Math.floor(this.pos[0] + ((this.sprite.resized[1] / 2 * this.dir) * Math.cos(this.angle / (180 / Math.PI))));
Â  Â  Â  Â  Â  Â  var y = Math.floor(this.pos[1] + ((this.sprite.resized[0] / 2 * this.dir) * Math.sin(this.angle / (180 / Math.PI))));
Â  Â  Â  Â  Â  Â  bullets.push(
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  pos: [x, y],
Â  Â  Â  Â  Â  Â  Â  Â  target: this.target,
Â  Â  Â  Â  Â  Â  Â  Â  speed: k * 12,
Â  Â  Â  Â  Â  Â  Â  Â  damage: this.damage,
Â  Â  Â  Â  Â  Â  Â  Â  angle: this.angle + getRandom (-5,3),
Â  Â  Â  Â  Â  Â  Â  Â  dir: this.dir,

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  this.lastshot = 0;

Â  Â  Â  Â  }Â Â Â Â 
Â  Â  };

Â  Â  Â Â Â Â window.Unit = Unit;
})();

var getRandom = function (min, max)
{
Â  Â  return Math.floor(Math.random() * (max - min + 1)) + min;
};

var getDistance = function (own, ally)
{

Â  Â  return Math.floor(Math.sqrt(Math.pow(own[0] - ally[0], 2) + Math.pow(own[1] - ally[1], 2)));
};

var deployUnit = function (unit, pos)
{
Â  Â  var u = unit;
Â  Â  units.push(new Unit(u[0], u[1], u[2], u[3], u[4], u[5], u[6], u[7], u[8], u[9], u[10], u[11], u[12], u[13]));
Â  Â  units[units.length - 1].pos = pos;
Â  Â  deployarea = false;
};

var deployEnemy = function (unit, pos)
{
Â  Â  var u = unit;
Â  Â  enemies.push(new Unit(u[0], u[1], u[2], u[3], u[4], u[5], u[6], u[7], u[8], u[9], u[10], u[11], u[12], u[13]));
Â  Â  enemies[enemies.length - 1].pos = pos;

};

var returnToBase = function (icon)
{
Â  Â  icon.pos = icon.defaultpos;
Â  Â  icon.dragable = false;
};
// Smoke-pure.js: (c) 2013-2014 Michael Romanovsky, or "Agamemnus" on Github. Released under the MIT license.

void function () {
Â var smoke = {}

Â // Options:
Â smoke.ok Â  Â  Â  Â  Â  Â  Â  = "ĞĞš" Â  Â  Â  Â  Â // Text for "Ok" button.
Â smoke.cancel Â  Â  Â  Â  Â  = "ĞÑ‚Ğ¼ĞµĞ½Ğ°" Â  Â  Â // Text for "Cancel" button.
Â smoke.point_event Â  Â  Â = 'click' Â  Â  Â  // Point event ("click", "touchstart", etc.)
Â smoke.parent Â  Â  Â  Â  Â  = document.body // Where the smoke div attaches. Note that if this is undefined (because document.body hasn't been added yet), the build function attempts to define it as document.body when the build function is run --that is, when the smoke DOM object is created.
Â smoke.zindex Â  Â  Â  Â  Â  = 10000 Â  Â  Â  Â  // Z-index of the smoke DOM object. This should be a high number.
Â smoke.reverse_buttons Â = false Â  Â  Â  Â  // If false, the "Ok" button appears before (left of) the "Cancel" button. If true, the "Cancel" button appears before the "Ok" button.
Â smoke.autofocus Â  Â  Â  Â = true Â  Â  Â  Â  Â // If true, the input is automatically focused when the smoke DOM object is created.
Â smoke.autoexit Â  Â  Â  Â  = true Â  Â  Â  Â  Â // If true, clicking outside the smoke dialog (but inside the dialog_wrapper) closes/detaches the smoke DOM object and runs the callback with a parameter of (false, evt).
Â smoke.custom_css Â  Â  Â  = {} Â  Â  Â  Â  Â  Â // Custom classes for each object in the structure. E.G.: smoke.custom_css = {"button.ok": "my_ok_button_style"} or smoke.custom_css = {"buttons.ok": ["my_ok_button_style1", "my_ok_button_style2"]}
Â smoke.css_prefix Â  Â  Â  = "smoke" Â  Â  Â  // The CSS prefix for the classes used in the .build function.
Â smoke.value Â  Â  Â  Â  Â  Â = undefined Â  Â  // The initial value to set the prompt input text to.
Â smoke.callback Â  Â  Â  Â  = undefined Â  Â  // Function to run after user input is sent.
Â smoke.observe_mutation = true Â  Â  Â  Â  Â // If true, attachess a mutation observer that will destroy the keyboard listeners when the element is removed from the DOM.
Â smoke.window_opened Â  Â = undefined Â  Â  // Function that runs at the end of smoke.build. Is in the form of "function (dom_window_object, text, processed_params)".
Â smoke.window_closed Â  Â = undefined Â  Â  // Function that runs after the object is removed from the DOM. Is in the form of "function (dom_window_object, text, processed_params)". Requires observe_mutation to be true for full functionality.
Â 
Â // Structure:
Â // var obj (return value) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | smoke-base
Â // Â obj.dialog_wrapper Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  | Â smoke-dialog_wrapper
Â // Â  obj.dialog Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | Â  smoke-dialog
Â // Â  Â obj.text Â  Â  Â  Â  Â  Â = obj.dialog.text Â  Â  Â  Â  Â  Â | Â  Â smoke-dialog-text
Â // Â  Â obj.prompt Â  Â  Â  Â  Â = obj.dialog.prompt Â  Â  Â  Â  Â | Â  Â smoke-dialog-prompt
Â // Â  Â  obj.prompt.input Â  = obj.dialog.prompt.input Â  Â | Â  Â  smoke-dialog-prompt-input
Â // Â  Â obj.buttons Â  Â  Â  Â  = obj.dialog.buttons Â  Â  Â  Â  | Â  Â smoke-dialog-buttons
Â // Â  Â  obj.buttons.ok Â  Â  = obj.dialog.buttons.ok Â  Â  Â | Â  Â  smoke-dialog-buttons-ok
Â // Â  Â  obj.buttons.cancel = obj.dialog.buttons.cancel Â | Â  Â  smoke-dialog-buttons-cancel
Â //
Â // Extras:
Â // obj.ok Â  Â  () // <-- programatically run "ok" on the object.
Â // obj.cancel () // <-- programatically run "cancel" on the object.
Â 
Â smoke.build = function (text, params) {
Â  if ((typeof smoke.parent == "undefined") || (smoke.parent == null)) smoke.parent = document.body
Â  var ok Â  Â  Â  Â  Â  Â  Â  Â  Â = (typeof params.ok Â  Â  Â  Â  Â  Â  Â  != "undefined") ? params.ok Â  Â  Â  Â  Â  Â  Â  : smoke.ok
Â  var cancel Â  Â  Â  Â  Â  Â  Â = (typeof params.cancel Â  Â  Â  Â  Â  != "undefined") ? params.cancel Â  Â  Â  Â  Â  : smoke.cancel
Â  var point_event Â  Â  Â  Â  = (typeof params.point_event Â  Â  Â != "undefined") ? params.point_event Â  Â  Â : smoke.point_event
Â  var parent Â  Â  Â  Â  Â  Â  Â = (typeof params.parent Â  Â  Â  Â  Â  != "undefined") ? params.parent Â  Â  Â  Â  Â  : smoke.parent
Â  var zindex Â  Â  Â  Â  Â  Â  Â = (typeof params.zindex Â  Â  Â  Â  Â  != "undefined") ? params.zindex Â  Â  Â  Â  Â  : smoke.zindex
Â  var reverse_buttons Â  Â  = (typeof params.reverse_buttons Â != "undefined") ? params.reverse_buttons Â : smoke.reverse_buttons
Â  var autoexit Â  Â  Â  Â  Â  Â = (typeof params.autoexit Â  Â  Â  Â  != "undefined") ? params.autoexit Â  Â  Â  Â  : smoke.autoexit
Â  var autofocus Â  Â  Â  Â  Â  = (typeof params.autofocus Â  Â  Â  Â != "undefined") ? params.autofocus Â  Â  Â  Â : smoke.autofocus
Â  var custom_css Â  Â  Â  Â  Â = (typeof params.custom_css Â  Â  Â  != "undefined") ? params.custom_css Â  Â  Â  : smoke.custom_css
Â  var css_prefix Â  Â  Â  Â  Â = (typeof params.css_prefix Â  Â  Â  != "undefined") ? params.css_prefix Â  Â  Â  : smoke.css_prefix
Â  var input_default_value = (typeof params.value Â  Â  Â  Â  Â  Â != "undefined") ? params.value Â  Â  Â  Â  Â  Â : smoke.value
Â  var callback Â  Â  Â  Â  Â  Â = (typeof params.callback Â  Â  Â  Â  != "undefined") ? params.callback Â  Â  Â  Â  : smoke.callback
Â  var observe_mutation Â  Â = (typeof params.observe_mutation != "undefined") ? params.observe_mutation : smoke.observe_mutation
Â  var window_opened Â  Â  Â  = (typeof params.window_opened Â  Â != "undefined") ? params.window_opened Â  Â : smoke.window_opened
Â  var window_closed Â  Â  Â  = (typeof params.window_closed Â  Â != "undefined") ? params.window_closed Â  Â : smoke.window_closed
Â  var window_closed_ran Â  = false
Â  params.point_event Â  Â  Â = point_event
Â  params.callback Â  Â  Â  Â  = callback
Â Â 
Â  var obj = document.createElement('div'); obj.className = css_prefix + '-base'; obj.style.zIndex = zindex
Â  parent.appendChild (obj)
Â Â 
Â  var dialog_wrapper = obj.dialog_wrapper = document.createElement ('div'); dialog_wrapper.className = css_prefix + '-dialog_wrapper'
Â  obj.appendChild (dialog_wrapper)
Â Â 
Â  // Add an event listener for when the user clicks outside of the dialog, but inside the dialog wrapper.
Â  // If activated, the parent smoke div removes itself and calls the callback.
Â  if (autoexit) {
Â  Â dialog_wrapper.addEventListener (point_event, function (evt) {
Â  Â  if (typeof evt.changedTouches != "undefined") evt = evt.changedTouches[0]
Â  Â  if (evt.currentTarget != evt.target) return
Â  Â  obj.parentNode.removeChild (obj)
Â  Â  params.callback (false, evt)
Â  Â  if ((!window_closed_ran) && smoke.window_closed) {smoke.window_closed (obj, text, params); window_closed_ran = true}
Â  Â })
Â  }
Â Â 
Â  var dialog = obj.dialog = document.createElement ('div'); dialog.className = css_prefix + '-dialog'
Â  dialog_wrapper.appendChild (dialog)
Â Â 
Â  var text_div = obj.text = obj.dialog.text = document.createElement ('div'); text_div.className = css_prefix + '-dialog-text'
Â  text_div.innerHTML = text
Â  dialog.appendChild (text_div)
Â Â 
Â  if (params.type == 'prompt') {
Â  Â var prompt = obj.prompt = obj.dialog.prompt = document.createElement ('div'); prompt.className = css_prefix + '-prompt'
Â  Â prompt.input = document.createElement ('input'); prompt.input.type = 'text'; Â prompt.input.className = css_prefix + '-prompt-input'
Â  Â if (typeof input_default_value != "undefined") prompt.input.value = input_default_value
Â  Â prompt.appendChild (prompt.input)
Â  Â dialog.appendChild (prompt)
Â  }
Â Â 
Â  var buttons = obj.buttons = obj.dialog.buttons = document.createElement ('div'); buttons.className = css_prefix + '-dialog-buttons'
Â  buttons.ok = document.createElement ('button'); buttons.ok.className = css_prefix + '-dialog-buttons-ok'; buttons.ok.innerHTML = ok
Â  if (params.type == 'alert') buttons.appendChild (buttons.ok)
Â  if ((params.type == 'prompt') || (params.type == 'confirm')) {
Â  Â buttons.cancel = document.createElement ('button'); buttons.cancel.className = css_prefix + '-dialog-buttons-cancel'; buttons.cancel.innerHTML = cancel
Â  Â if (params.reverse_buttons) {
Â  Â  buttons.appendChild (buttons.cancel); buttons.appendChild (buttons.ok)
Â  Â } else {
Â  Â  buttons.appendChild (buttons.ok); buttons.appendChild (buttons.cancel)
Â  Â }
Â  }
Â  dialog.appendChild (buttons)
Â Â 
Â  // Append any extra CSS styles on any part of the structure.
Â  for (var current_structure_name in custom_css) {
Â  Â var property_array = current_structure_name.split (".")
Â  Â var current_element = obj
Â  Â property_array.forEach (function (current_property) {current_element = current_element[current_property]})
Â  Â var current_class_list = custom_css[current_structure_name]
Â  Â if (typeof current_class_list == "string") current_class_list = [current_class_list]
Â  Â current_class_list.forEach (function (current_classname) {current_element.classList.add (current_classname)})
Â  }
Â Â 
Â  if (typeof params.callback != "function") params.callback = function () {}
Â  obj.params = params
Â  smoke['finishbuilding_' + params.type] (obj, params)
Â  if ((typeof obj.prompt != "undefined") && (autofocus != false)) obj.prompt.input.focus ()
Â Â 
Â  // Add a mutation observer that observes for the object's removal. If it is removed, destroy the listeners and run smoke.window_closed.
Â  if (observe_mutation) {
Â  Â var MutationObserver = window.MutationObserver || window.WebkitMutationObserver
Â  Â if (typeof MutationObserver != "undefined") {
Â  Â  var observer = new MutationObserver (function (mutation_list) {
Â  Â  Â for (var i = 0, curlen_i = mutation_list.length; i < curlen_i; i++) {
Â  Â  Â  var mutation_item = mutation_list[i]
Â  Â  Â  if (mutation_item.type != 'childList') return
Â  Â  Â  for (var j = 0, curlen_j = mutation_item.removedNodes.length; j < curlen_j; j++) {
Â  Â  Â  Â if (mutation_item.removedNodes[j] != obj) continue
Â  Â  Â  Â if ((!window_closed_ran) && smoke.window_closed) {smoke.window_closed (obj, text, params); window_closed_ran = true}
Â  Â  Â  Â obj.destroy_listeners (observer)
Â  Â  Â  Â return
Â  Â  Â  }
Â  Â  Â }
Â  Â  })
Â  Â  observer.observe (parent, {attributes: false, childList: true, subtree: false})
Â  Â }
Â  }
Â Â 
Â  if (smoke.window_opened) smoke.window_opened (obj, text, params)
Â Â 
Â  return obj
Â }
Â 
Â smoke.finishbuilding_alert Â  = function (obj) {
Â  obj.callback_ok = function () {obj.params.callback ()}
Â  obj.destroy_listeners = function (observer) {if (observer) observer.disconnect (); document.removeEventListener ('keyup', ok_function_wrapper)}
Â  var ok_function_wrapper = obj.ok = function (evt) {ok_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener (obj.params.point_event, ok_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj = obj
Â }
Â smoke.finishbuilding_confirm = function (obj) {
Â  obj.callback_ok Â  Â  = function () {obj.params.callback (true)}
Â  obj.callback_cancel = function () {obj.params.callback (false)}
Â  obj.destroy_listeners = function (observer) {
Â  Â if (observer) observer.disconnect ()
Â  Â document.removeEventListener ('keyup', ok_function_wrapper)
Â  Â document.removeEventListener ('keyup', cancel_function_wrapper)
Â  }
Â  var ok_function_wrapper Â  Â  = obj.ok Â  Â  = function (evt) {ok_function Â  Â (evt, obj)}
Â  var cancel_function_wrapper = obj.cancel = function (evt) {cancel_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener Â  Â  (obj.params.point_event, ok_function_wrapper)
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', cancel_function_wrapper)
Â  obj.buttons.cancel.addEventListener (obj.params.point_event, cancel_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj Â  Â  = obj
Â  obj.buttons.cancel.smoke_pure_obj = obj
Â }
Â smoke.finishbuilding_prompt Â = function (obj) {
Â  obj.callback_ok Â  Â  = function () {obj.params.callback (obj.prompt.input.value)}
Â  obj.callback_cancel = function () {obj.params.callback (false)}
Â  obj.destroy_listeners = function (observer) {
Â  Â if (observer) observer.disconnect ()
Â  Â document.removeEventListener ('keyup', ok_function_wrapper)
Â  Â document.removeEventListener ('keyup', cancel_function_wrapper)
Â  }
Â  var ok_function_wrapper Â  Â  = obj.ok Â  Â  = function (evt) {ok_function Â  Â (evt, obj)}
Â  var cancel_function_wrapper = obj.cancel = function (evt) {cancel_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener Â  Â  (obj.params.point_event, ok_function_wrapper)
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', cancel_function_wrapper)
Â  obj.buttons.cancel.addEventListener (obj.params.point_event, cancel_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj Â  Â  = obj
Â  obj.buttons.cancel.smoke_pure_obj = obj
Â }
Â 
Â function ok_function (evt, obj) {
Â  if (evt && (((evt.type == "keyup") && (typeof evt.keyCode != "undefined")) && ((evt.keyCode == 0) || (evt.keyCode != 13)))) return
Â  obj.destroy_listeners ()
Â  if (obj.parentNode) obj.parentNode.removeChild (obj)
Â  obj.callback_ok ()
Â }
Â function cancel_function (evt, obj) {
Â  if (evt && (((evt.type == "keyup") && (typeof evt.keyCode != "undefined")) && ((evt.keyCode == 0) || (evt.keyCode != 27)))) return
Â  obj.destroy_listeners ()
Â  if (obj.parentNode) obj.parentNode.removeChild (obj)
Â  obj.callback_cancel ()
Â }
Â 
Â smoke.action_list = [{name : 'alert'}, {name : 'confirm'}, {name : 'prompt'}]
Â 
Â for (var i = 0; i < smoke.action_list.length; i++) {
Â  void function (current_action) {
Â  Â smoke[current_action] = function (text, callback, params) {return smoke.build (text, merge_objects ({callback: callback, type: current_action}, params))}
Â  } (smoke.action_list[i].name)
Â }
Â 
Â function merge_objects (secondary, primary) {
Â  // The primary object's duplicate keys are superior. The secondary object's duplicate keys are inferior.
Â  if (typeof secondary == "undefined") var primary = primary.primary, secondary = primary.secondary
Â  var new_object = {}
Â  for (var property in secondary) {new_object[property] = secondary[property]}
Â  for (var property in primary) Â  {new_object[property] = primary Â [property]}
Â  return new_object
Â }
Â 
Â if (typeof module != 'undefined' && module.exports) {
Â  module.exports = smoke
Â } else if (typeof define === 'function' && define.amd) {
Â  define ('smoke', [], function() {return smoke})
Â } else {
Â  this.smoke = smoke
Â }
} ()

var gameOver = function (a)
{

Â  Â  var _min = Math.floor(gameTime / 60);
Â  Â  var _sec = ('0' + Math.floor(gameTime % 60)).slice(-2);


Â  Â  switch (a)
Â  Â  {

Â  Â  case 'win':

Â  Â  Â  Â  smoke.alert("âœ”Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½! \n\n ğŸ“ŠĞ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°: \n â±ï¸Ğ’Ñ€ĞµĞ¼Ñ: " + _min + ':' + _sec + '\nâ˜ ĞŸĞ¾Ğ´Ğ±Ğ¸Ñ‚: ' + counter + '\nâš”Ğ£Ğ±Ğ¸Ğ»: ' + counter2 + '.');

Â  Â  Â  Â  var log_item = "<h2 align = 'center' class = 'win'>Ğ˜Ğ³Ñ€Ğ° " + ++gameNum + ": ğŸ† ĞŸĞ¾Ğ±ĞµĞ´Ğ° â±ï¸" + _min + ':' + _sec + ' /' + dif[lvl] + ' /' + "</h2>";
Â  Â  Â  Â  if (lvl < dif.length - 1) lvl++;
Â  Â  Â  Â  var log = document.getElementById('log');
Â  Â  Â  Â  log.innerHTML += log_item;
Â  Â  Â  Â  document.body.style.paddingTop = 50 - (gameNum * 3) + "%";
Â  Â  Â  Â  log.style.display = "block";
Â  Â  Â  Â  loader();
Â  Â  Â  Â  break;

Â  Â  case 'loss':
Â  Â  Â  Â  smoke.alert("âŒĞŸĞ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ! \n\n ğŸ“ŠĞ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°: \n â±ï¸Ğ’Ñ€ĞµĞ¼Ñ: " + _min + ':' + _sec + '\nâ˜ ĞŸĞ¾Ğ´Ğ±Ğ¸Ñ‚: ' + counter + '\nâš”Ğ£Ğ±Ğ¸Ğ»: ' + counter2 + '.');

Â  Â  Â  Â  var log_item = "<h2 align = 'center' class = 'loss'>Ğ˜Ğ³Ñ€Ğ° " + ++gameNum + ": ğŸ’© ĞŸĞ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ â±ï¸" + _min + ':' + _sec + ' /' + dif[lvl] + ' /' + "</h2>";
Â  Â  Â  Â  var log = document.getElementById('log');
Â  Â  Â  Â  log.innerHTML += log_item;
Â  Â  Â  Â  document.body.style.paddingTop = 50 - (gameNum * 3)+ "%";
Â  Â  Â  Â  log.style.display = "block";
Â  Â  Â  Â  loader();
Â  Â  Â  Â  break;

Â  Â  }
}

var reset = function ()
{

Â  Â  units = [];
Â  Â  icons = [];
Â  Â  bullets = [];
Â  Â  enemies = [];
Â  Â  explosions = [];
Â  Â  isGameOver = false;
Â  Â  gameTime = 0;
Â  Â  enemydep = 1;
Â  Â  firstwave = false;
Â  Â  nextwave = 0;
Â  Â  deployarea = false;
Â  Â  counter = 0;
Â  Â  counter2 = 0;
}

var xxx = 0,
Â  Â  yyy = 0;
var mouse =
{
Â  Â  x: 0,
Â  Â  y: 0,
Â  Â  down: false
}

/////////////////////////////

var startGame = function ()
{

Â  Â  reset();
Â  Â Â 
Â  Â  var modal = document.getElementById("myModal");
Â  Â  var span = document.getElementsByClassName("close")[0];
Â  Â  var p = document.getElementsByClassName("modal-text")[0];
Â  Â  span.onclick = function() {
Â  Â  Â  Â  Â modal.style.display = "none";
Â  Â  Â  Â  Â game_paused = !game_paused;
Â  Â  }

Â  Â  var log = document.getElementById('log');
Â  Â  var popup = document.getElementById('infdiv');
Â  Â Â 
Â  Â Â 
Â  Â  log.style.display = "none";
Â  Â  popup.style.display = 'none';
Â  Â  document.body.style.paddingTop = 0;
Â  Â  Â  Â Â 
Â  Â  var maindiv = document.getElementById("main");

Â  Â  maindiv.innerHTML = '<canvas id="c"></canvas>';

Â  Â  var c = document.getElementById("c");

Â  Â  var ctx = c.getContext("2d");

Â  Â  w = window.innerWidth;
Â  Â  h = window.innerHeight;
Â  Â Â 

Â  Â  if (w < h) {
Â  Â  Â  Â  c.width = w - 46;
Â  Â  Â  Â  c.height = c.width/0.7;
Â  Â  } else {
Â  Â  Â  Â  c.height = h - 46;
Â  Â  Â  Â  c.width = c.height * 0.7;
Â  Â  }
Â  Â Â 
Â  Â  k = c.width / 26;

Â  Â  xo = c.offsetLeft;
Â  Â  yo = c.offsetTop;
Â  Â Â 
Â  Â Â 
Â  Â  ////

Â  Â  icons = [
Â  Â  {
Â  Â  Â  Â  active: true,
Â  Â  Â  Â  pos: [c.width / 28, c.height - c.height / 8],
Â  Â  Â  Â  defaultpos: [c.width / 28, c.height - c.height / 8],
Â  Â  Â  Â  respawn: false,
Â  Â  Â  Â  respawnrate: 1,
Â  Â  Â  Â  sprite: new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [55, 76], [194, 134], [c.width / 5.5, c.height / 10.5])
Â  Â  },
Â  Â  {
Â  Â  Â  Â  active: true,
Â  Â  Â  Â  pos: [c.width / 3.4, c.height - c.height / 8.5],
Â  Â  Â  Â  defaultpos: [c.width / 3.4, c.height - c.height / 8.5],
Â  Â  Â  Â  respawn: false,
Â  Â  Â  Â  respawnrate: 3,
Â  Â  Â  Â  sprite: new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [71, 600], [159, 130], [c.width / 6.5, c.height / 12])
Â  Â  },
Â  Â  {
Â  Â  Â  Â  active: true,
Â  Â  Â  Â  pos: [c.width / 1.85, c.height - c.height / 8.2],
Â  Â  Â  Â  defaultpos: [c.width / 1.85, c.height - c.height / 8.2],
Â  Â  Â  Â  respawn: false,
Â  Â  Â  Â  respawnrate: 0.5,
Â  Â  Â  Â  sprite: new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [52, 269], [205, 124], [c.width / 5.8, c.height / 12])
Â  Â  },
Â  Â  {
Â  Â  Â  Â  active: false,
Â  Â  Â  Â  pos: [c.width / 1.27, c.height - c.height / 8.2],
Â  Â  Â  Â  defaultpos: [c.width / 1.27, c.height - c.height / 8.2],
Â  Â  Â  Â  respawn: false,
Â  Â  Â  Â  respawnrate: 0.5,
Â  Â  Â  Â  sprite: new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [68, 434], [230 - 68, 565 - 434], [c.width / 5.8, c.height / 12])
Â  Â  }];

Â  Â  ///

Â  Â  c.addEventListener("touchmove", function (event)
Â  Â  {

Â  Â  Â  Â  var touch = event.touches[0];
Â  Â  Â  Â  xxx = touch.pageX - xo - 3;
Â  Â  Â  Â  yyy = touch.pageY - yo - 3;

Â  Â  Â  Â  checkIcons(xxx, yyy);

Â  Â  Â  Â  event.preventDefault();
Â  Â  }, false);

Â  Â  c.addEventListener("touchend", function (event)
Â  Â  {

Â  Â  Â  Â  checkDeployment(xxx, yyy);

Â  Â  }, false);

Â  Â  c.addEventListener("mousemove", function (event)
Â  Â  {
Â  Â  Â  Â  mouse.x = event.pageX - xo - 3;
Â  Â  Â  Â  mouse.y = event.pageY - yo - 3;
Â  Â  }, false);

Â  Â  c.addEventListener("mousedown", function ()
Â  Â  {
Â  Â  Â  Â  mouse.down = true;
Â  Â  Â  Â  checkIcons(mouse.x, mouse.y);

Â  Â  }, false);

Â  Â  c.addEventListener("mouseup", function ()
Â  Â  {
Â  Â  Â  Â  mouse.down = false;
Â  Â  Â  Â  checkDeployment(mouse.x, mouse.y);
Â  Â  }, false);

Â  Â  function checkIcons(xx, yy)
Â  Â  {

Â  Â  Â  Â  if (xx > icons[0].pos[0] && xx < icons[0].pos[0] + (k * 5) && yy > icons[0].pos[1] - (k * 3) && yy < icons[0].pos[1] + (k * 3) && !icons[0].respawn Â && !game_paused)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  if (!icons[1].dragable && !icons[2].dragable)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  icons[0].dragable = true;
Â  Â  Â  Â  Â  Â  Â  Â  basictank[0] = 'readyfordeploy';
Â  Â  Â  Â  Â  Â  Â  Â  deployarea = true;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if (xx > icons[1].pos[0] && xx < icons[1].pos[0] + (k * 5) && yy > icons[1].pos[1] - (k * 3) && yy < icons[1].pos[1] + (k * 3) && !icons[1].respawn Â && !game_paused)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  if (!icons[0].dragable && !icons[2].dragable)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  icons[1].dragable = true;
Â  Â  Â  Â  Â  Â  Â  Â  lighttank[0] = 'readyfordeploy';
Â  Â  Â  Â  Â  Â  Â  Â  deployarea = true;

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if (xx > icons[2].pos[0] && xx < icons[2].pos[0] + (k * 5) && yy > icons[2].pos[1] - (k * 3) && yy < icons[2].pos[1] + (k * 3) && !icons[2].respawn Â && !game_paused)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  if (!icons[0].dragable && !icons[1].dragable)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  icons[2].dragable = true;
Â  Â  Â  Â  Â  Â  Â  Â  ttank[0] = 'readyfordeploy';
Â  Â  Â  Â  Â  Â  Â  Â  deployarea = true;

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (xx > icons[3].pos[0] && xx < icons[3].pos[0] + (k * 5) && yy > icons[3].pos[1] - (k * 3) && yy < icons[3].pos[1] + (k * 3))
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â game_paused = !game_paused;
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â if(modal.style.display == "block") {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = "none";
Â  Â  Â  Â  Â  Â } else {
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  p.innerHTML = 'Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ° Ğ¿Ğ°ÑƒĞ·Ğµ...';Â 
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.width = c.width*0.8 + "px";
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.marginLeft = c.width*0.1 + xo + "px";
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = "block";
Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function checkDeployment(xx, yy)
Â  Â  {

Â  Â  Â  Â  var inside = false;
Â  Â  Â 
Â  Â  Â  Â  if (xx > c.width / 100 && yy > c.height / 2 && xx < c.width - c.width / 100 - 3 && yy < c.height / 2 + c.height / 3.7)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  inside = true;
Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  var allies = false;
Â  Â  Â  Â  for(var i = 0; i < units.length; i++) {
Â  Â  Â  Â  Â  Â  if (getDistance([xx,yy], units[i].pos) < Â 2*k) allies = true;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (basictank[0] == 'readyfordeploy' && inside && !allies)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  basictank[0] = ' ';
Â  Â  Â  Â  Â  Â  deployUnit(basictank, [xx, yy]);
Â  Â  Â  Â  Â  Â  units[units.length - 1].status = 'acceleration';
Â  Â  Â  Â  Â  Â  icons[0].pos = [icons[0].defaultpos[0], icons[0].defaultpos[1] + c.width / 4];
Â  Â  Â  Â  Â  Â  icons[0].dragable = false;
Â  Â  Â  Â  Â  Â  icons[0].respawn = true;
Â  Â  Â  Â  Â  Â  deployarea = false;
Â  Â  Â  Â  }
Â  Â  Â  Â  else if ( basictank[0] == 'readyfordeploy' && (!inside && !icons[0].respawn || allies))
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  returnToBase(icons[0]);
Â  Â  Â  Â  Â  Â  basictank[0] = ' '
Â  Â  Â  Â  }

Â  Â  Â  Â  if (lighttank[0] == 'readyfordeploy' && inside && !allies)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  lighttank[0] = ' ';
Â  Â  Â  Â  Â  Â  deployUnit(lighttank, [xx, yy]);
Â  Â  Â  Â  Â  Â  units[units.length - 1].status = 'acceleration';
Â  Â  Â  Â  Â  Â  icons[1].pos = [icons[1].defaultpos[0], icons[1].defaultpos[1] + c.width / 4];;
Â  Â  Â  Â  Â  Â  icons[1].dragable = false;
Â  Â  Â  Â  Â  Â  icons[1].respawn = true;

Â  Â  Â  Â  }
Â  Â  Â  Â  else if ( lighttank[0] == 'readyfordeploy' && (!inside && !icons[1].respawn || allies))
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  returnToBase(icons[1]);
Â  Â  Â  Â  Â  Â  lighttank[0] = " ";
Â  Â  Â  Â  }

Â  Â  Â  Â  if (ttank[0] == 'readyfordeploy' && inside && !allies)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  ttank[0] = ' ';
Â  Â  Â  Â  Â  Â  deployUnit(ttank, [xx, yy]);
Â  Â  Â  Â  Â  Â  units[units.length - 1].status = 'acceleration';
Â  Â  Â  Â  Â  Â  icons[2].pos = [icons[2].defaultpos[0], icons[2].defaultpos[1] + c.width / 4];;
Â  Â  Â  Â  Â  Â  icons[2].dragable = false;
Â  Â  Â  Â  Â  Â  icons[2].respawn = true;

Â  Â  Â  Â  }
Â  Â  Â  Â  else if ( ttank[0] == 'readyfordeploy' && (!inside && !icons[2].respawn || allies))
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  returnToBase(icons[2]);
Â  Â  Â  Â  Â  Â  ttank[0] = " ";
Â  Â  Â  Â  }

Â  Â  }


Â  Â  lastTime = Date.now();


Â  Â  // Ñ‚Ğ²Ğ¾Ğ¸ Ñ‚Ğ°Ğ½ĞºĞ¸
Â  Â  // Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  stats -- status, pos, hp, speed, maxspeed, Â range, damage, reload, angle, defaultangle , dir, sprite

Â  Â  var basictank = ['acceleration', [0, Â  Â  Â  Â  Â  0], 2000, 0, Â  k * 1.5, k * 110, Â  Â 600, Â  Â 1.3, Â  Â - 90, Â  Â - 90, Â  Â  Â  Â 1, Â  new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [55, 76], [194, 135], [c.width / 11, c.height / 21])];
Â  Â  var lighttank = ['acceleration', [0, Â  Â  Â  Â  Â  0], 500, Â 0, Â  k * 15.0, k * 110, Â  250, Â  Â 0.9, Â  Â - 90, Â  Â - 90, Â  Â  Â  Â 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [71, 600], [159, 130], [c.width / 13, c.height / 24])];
Â  Â  var ttank = Â  Â  ['acceleration', [0, Â  Â  Â  Â  Â  0], 200, Â 0, Â  k * 3.5, k * 110, 50, Â  Â  0.05, Â  - 90, Â  Â - 90, Â  Â  Â  Â 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [52, 269], [205, 124], [c.width / 11.6, c.height / 24])];
Â  Â Â 
Â  Â  //Ğ²Ñ€Ğ°Ğ³Ğ¸
Â  Â  var enemybasic = ['acceleration', [0, Â  Â  Â  Â  Â 0], 2000, 0, Â  k * 1.5, k * 110, Â  Â 600, Â  Â 1.3, Â  Â - 90, Â  Â - 90, Â  Â  Â  Â - 1, Â  new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [365, 76], [194, 135], [c.width / 11, c.height / 21])];
Â  Â  var enemylight = ['acceleration', [200, Â  Â  Â 200], 500, Â 0, Â  k * 15.0, k * 110, Â  250, Â  Â 0.9, Â  Â - 90, Â  Â - 90, Â  Â  Â - 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [395, 600], [159, 130], [c.width / 13, c.height / 24])];
Â  Â  var enemyttank = ['acceleration', [0, Â  Â  Â  Â  Â 0], 200, Â 0, Â  k * 3.5, k * 40, 50, Â  Â  0.05, Â  - 90, Â  Â - 90, Â  Â  Â - 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [362, 269], [205, 124], [c.width / 11.6, c.height / 24])];
Â  Â  //hp
Â  Â  var enemybasichp = ['acceleration', [0, Â  Â  Â  Â  Â 0], 2000, 0, Â  k * 1.5, k * 110, Â  Â 800, Â  Â 1.3, Â  Â - 90, Â  Â - 90, Â  Â  Â  Â - 1, Â  new Sprite('https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png', [365, 76], [194, 135], [c.width / 11, c.height / 21])];
Â  Â  var enemylighthp = ['acceleration', [200, Â  Â  Â 200], 500, Â 0, Â  k * 15.0, k * 110, Â  320, Â  Â 0.9, Â  Â - 90, Â  Â - 90, Â  Â  Â - 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [395, 600], [159, 130], [c.width / 13, c.height / 24])];
Â  Â  var enemyttankhp = ['acceleration', [0, Â  Â  Â  Â  Â 0], 200, Â 0, Â  k * 3.5, k * 40, 70, Â  Â  0.05, Â  - 90, Â  Â - 90, Â  Â  Â - 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [362, 269], [205, 124], [c.width / 11.6, c.height / 24])];
Â  Â  //tutorial
Â  Â  var enemylighttutorial = ['acceleration', [200, Â  Â  Â 200], 500, Â 0, Â  k * 1, k * 110, Â  20, Â  Â 0.21, Â  Â - 90, Â  Â - 90, Â  Â  Â - 1, Â  new Sprite("https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png", [395, 600], [159, 130], [c.width / 13, c.height / 24])];


Â  Â  main()

Â  Â  // The main game loop

Â  Â  function main()
Â  Â  {

Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  var now = Date.now();

Â  Â  Â  Â  if (!game_paused) {Â 
Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  Â  var dt = (now - lastTime) / 1000;

Â  Â  Â  Â  Â  update(dt);

Â  Â  Â  Â  Â  render();
Â  Â  Â  Â Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  lastTime = now;

Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  ifÂ Â (!isGameOver)Â requestAnimFrame(main);

Â  Â  };

Â  Â  function update(dt)
Â  Â  {

Â  Â  Â  Â  Â Â Â Â gameTime += dt;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (nextwave < -99999) {
Â  Â  Â  Â  Â  Â  Â  Â  nextwave = (enemydep * (-9999999999999 - lvl)-gameTime + -999999999).toFixed(0)Â 
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â nextwave -= dt;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  if (Math.floor(gameTime) == 1 && firstwave == false)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (lvl == 0) {
Â  Â  Â  Â  Â  Â  Â  Â  function sayTutorial1() {
Â  Â  Â  Â  Â  Â  Â  Â  smoke.alert('ĞŸĞµÑ€ĞµÑ‚Ğ°ĞºÑĞ¸Ğ²Ğ°Ğ¹ ÑĞ²Ğ¾Ğ¸ Ñ‚Ğ°Ğ½ĞºĞ¸ Ğ½Ğ° Ğ¿Ğ¾Ğ»Ğµ Ğ±Ğ¾Ñ!');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(sayTutorial1, 10);

Â  Â  Â  Â  Â  Â  Â  Â  function sayTutorial2() {
Â  Â  Â  Â  Â  Â  Â  Â  smoke.alert('Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¸Ñ… Ğ¸ Ğ´Ğ¾Ğ±Ñ€Ğ°ÑŒÑÑ Ğ´Ğ¾ Ğ·ĞµĞ»ĞµĞ½Ğ¾Ğ¹ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ² Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¿Ğ¾Ğ»Ñ!');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(sayTutorial2, 3000);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighttutorial, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighttutorial, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 1) {
Â  Â  Â  Â  Â  Â  Â  Â  function sayTutorial3() {
Â  Â  Â  Â  Â  Â  Â  Â  smoke.alert('Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ÑĞ°Ğ¼. Ğ£Ğ´Ğ°Ñ‡Ğ¸! ğŸ˜„');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(sayTutorial3, 1000);

Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 2) {
Â  Â  Â  Â  Â  Â  Â  Â  function sayTutorial3() {
Â  Â  Â  Â  Â  Â  Â  Â  smoke.alert('ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾, Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ğ¹ Ğ² Ñ‚Ğ¾Ğ¼-Ğ¶Ğµ Ğ´ÑƒÑ…Ğµ! ğŸ˜„');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(sayTutorial3, 1000);

Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 3) {
Â  Â  Â  Â  Â  Â  Â  Â  smoke.alert('Ğ”Ğ°Ğ²Ğ°Ğ¹, Ñ‚Ñ‹ ÑƒĞ¶Ğµ Ğ½Ğ° 3/20 ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹, Ğ¿Ğ¾Ğ´Ğ½Ğ°Ğ¶Ğ¼Ğ¸! ğŸ˜‰');
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 4) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 5) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 6) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 7) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 8) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 6]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 9) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [c.width / 10, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [c.width / 3, c.height / 4]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  //new
Â  Â  Â  Â  Â  Â  if (lvl == 10) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
// Smoke-pure.js: (c) 2013-2014 Michael Romanovsky, or "Agamemnus" on Github. Released under the MIT license.

void function () {
Â var smoke = {}

Â // Options:
Â smoke.ok Â  Â  Â  Â  Â  Â  Â  = "ĞĞš" Â  Â  Â  Â  Â // Text for "Ok" button.
Â smoke.cancel Â  Â  Â  Â  Â  = "ĞÑ‚Ğ¼ĞµĞ½Ğ°" Â  Â  Â // Text for "Cancel" button.
Â smoke.point_event Â  Â  Â = 'click' Â  Â  Â  // Point event ("click", "touchstart", etc.)
Â smoke.parent Â  Â  Â  Â  Â  = document.body // Where the smoke div attaches. Note that if this is undefined (because document.body hasn't been added yet), the build function attempts to define it as document.body when the build function is run --that is, when the smoke DOM object is created.
Â smoke.zindex Â  Â  Â  Â  Â  = 10000 Â  Â  Â  Â  // Z-index of the smoke DOM object. This should be a high number.
Â smoke.reverse_buttons Â = false Â  Â  Â  Â  // If false, the "Ok" button appears before (left of) the "Cancel" button. If true, the "Cancel" button appears before the "Ok" button.
Â smoke.autofocus Â  Â  Â  Â = true Â  Â  Â  Â  Â // If true, the input is automatically focused when the smoke DOM object is created.
Â smoke.autoexit Â  Â  Â  Â  = true Â  Â  Â  Â  Â // If true, clicking outside the smoke dialog (but inside the dialog_wrapper) closes/detaches the smoke DOM object and runs the callback with a parameter of (false, evt).
Â smoke.custom_css Â  Â  Â  = {} Â  Â  Â  Â  Â  Â // Custom classes for each object in the structure. E.G.: smoke.custom_css = {"button.ok": "my_ok_button_style"} or smoke.custom_css = {"buttons.ok": ["my_ok_button_style1", "my_ok_button_style2"]}
Â smoke.css_prefix Â  Â  Â  = "smoke" Â  Â  Â  // The CSS prefix for the classes used in the .build function.
Â smoke.value Â  Â  Â  Â  Â  Â = undefined Â  Â  // The initial value to set the prompt input text to.
Â smoke.callback Â  Â  Â  Â  = undefined Â  Â  // Function to run after user input is sent.
Â smoke.observe_mutation = true Â  Â  Â  Â  Â // If true, attachess a mutation observer that will destroy the keyboard listeners when the element is removed from the DOM.
Â smoke.window_opened Â  Â = undefined Â  Â  // Function that runs at the end of smoke.build. Is in the form of "function (dom_window_object, text, processed_params)".
Â smoke.window_closed Â  Â = undefined Â  Â  // Function that runs after the object is removed from the DOM. Is in the form of "function (dom_window_object, text, processed_params)". Requires observe_mutation to be true for full functionality.
Â 
Â // Structure:
Â // var obj (return value) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | smoke-base
Â // Â obj.dialog_wrapper Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  | Â smoke-dialog_wrapper
Â // Â  obj.dialog Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | Â  smoke-dialog
Â // Â  Â obj.text Â  Â  Â  Â  Â  Â = obj.dialog.text Â  Â  Â  Â  Â  Â | Â  Â smoke-dialog-text
Â // Â  Â obj.prompt Â  Â  Â  Â  Â = obj.dialog.prompt Â  Â  Â  Â  Â | Â  Â smoke-dialog-prompt
Â // Â  Â  obj.prompt.input Â  = obj.dialog.prompt.input Â  Â | Â  Â  smoke-dialog-prompt-input
Â // Â  Â obj.buttons Â  Â  Â  Â  = obj.dialog.buttons Â  Â  Â  Â  | Â  Â smoke-dialog-buttons
Â // Â  Â  obj.buttons.ok Â  Â  = obj.dialog.buttons.ok Â  Â  Â | Â  Â  smoke-dialog-buttons-ok
Â // Â  Â  obj.buttons.cancel = obj.dialog.buttons.cancel Â | Â  Â  smoke-dialog-buttons-cancel
Â //
Â // Extras:
Â // obj.ok Â  Â  () // <-- programatically run "ok" on the object.
Â // obj.cancel () // <-- programatically run "cancel" on the object.
Â 
Â smoke.build = function (text, params) {
Â  if ((typeof smoke.parent == "undefined") || (smoke.parent == null)) smoke.parent = document.body
Â  var ok Â  Â  Â  Â  Â  Â  Â  Â  Â = (typeof params.ok Â  Â  Â  Â  Â  Â  Â  != "undefined") ? params.ok Â  Â  Â  Â  Â  Â  Â  : smoke.ok
Â  var cancel Â  Â  Â  Â  Â  Â  Â = (typeof params.cancel Â  Â  Â  Â  Â  != "undefined") ? params.cancel Â  Â  Â  Â  Â  : smoke.cancel
Â  var point_event Â  Â  Â  Â  = (typeof params.point_event Â  Â  Â != "undefined") ? params.point_event Â  Â  Â : smoke.point_event
Â  var parent Â  Â  Â  Â  Â  Â  Â = (typeof params.parent Â  Â  Â  Â  Â  != "undefined") ? params.parent Â  Â  Â  Â  Â  : smoke.parent
Â  var zindex Â  Â  Â  Â  Â  Â  Â = (typeof params.zindex Â  Â  Â  Â  Â  != "undefined") ? params.zindex Â  Â  Â  Â  Â  : smoke.zindex
Â  var reverse_buttons Â  Â  = (typeof params.reverse_buttons Â != "undefined") ? params.reverse_buttons Â : smoke.reverse_buttons
Â  var autoexit Â  Â  Â  Â  Â  Â = (typeof params.autoexit Â  Â  Â  Â  != "undefined") ? params.autoexit Â  Â  Â  Â  : smoke.autoexit
Â  var autofocus Â  Â  Â  Â  Â  = (typeof params.autofocus Â  Â  Â  Â != "undefined") ? params.autofocus Â  Â  Â  Â : smoke.autofocus
Â  var custom_css Â  Â  Â  Â  Â = (typeof params.custom_css Â  Â  Â  != "undefined") ? params.custom_css Â  Â  Â  : smoke.custom_css
Â  var css_prefix Â  Â  Â  Â  Â = (typeof params.css_prefix Â  Â  Â  != "undefined") ? params.css_prefix Â  Â  Â  : smoke.css_prefix
Â  var input_default_value = (typeof params.value Â  Â  Â  Â  Â  Â != "undefined") ? params.value Â  Â  Â  Â  Â  Â : smoke.value
Â  var callback Â  Â  Â  Â  Â  Â = (typeof params.callback Â  Â  Â  Â  != "undefined") ? params.callback Â  Â  Â  Â  : smoke.callback
Â  var observe_mutation Â  Â = (typeof params.observe_mutation != "undefined") ? params.observe_mutation : smoke.observe_mutation
Â  var window_opened Â  Â  Â  = (typeof params.window_opened Â  Â != "undefined") ? params.window_opened Â  Â : smoke.window_opened
Â  var window_closed Â  Â  Â  = (typeof params.window_closed Â  Â != "undefined") ? params.window_closed Â  Â : smoke.window_closed
Â  var window_closed_ran Â  = false
Â  params.point_event Â  Â  Â = point_event
Â  params.callback Â  Â  Â  Â  = callback
Â Â 
Â  var obj = document.createElement('div'); obj.className = css_prefix + '-base'; obj.style.zIndex = zindex
Â  parent.appendChild (obj)
Â Â 
Â  var dialog_wrapper = obj.dialog_wrapper = document.createElement ('div'); dialog_wrapper.className = css_prefix + '-dialog_wrapper'
Â  obj.appendChild (dialog_wrapper)
Â Â 
Â  // Add an event listener for when the user clicks outside of the dialog, but inside the dialog wrapper.
Â  // If activated, the parent smoke div removes itself and calls the callback.
Â  if (autoexit) {
Â  Â dialog_wrapper.addEventListener (point_event, function (evt) {
Â  Â  if (typeof evt.changedTouches != "undefined") evt = evt.changedTouches[0]
Â  Â  if (evt.currentTarget != evt.target) return
Â  Â  obj.parentNode.removeChild (obj)
Â  Â  params.callback (false, evt)
Â  Â  if ((!window_closed_ran) && smoke.window_closed) {smoke.window_closed (obj, text, params); window_closed_ran = true}
Â  Â })
Â  }
Â Â 
Â  var dialog = obj.dialog = document.createElement ('div'); dialog.className = css_prefix + '-dialog'
Â  dialog_wrapper.appendChild (dialog)
Â Â 
Â  var text_div = obj.text = obj.dialog.text = document.createElement ('div'); text_div.className = css_prefix + '-dialog-text'
Â  text_div.innerHTML = text
Â  dialog.appendChild (text_div)
Â Â 
Â  if (params.type == 'prompt') {
Â  Â var prompt = obj.prompt = obj.dialog.prompt = document.createElement ('div'); prompt.className = css_prefix + '-prompt'
Â  Â prompt.input = document.createElement ('input'); prompt.input.type = 'text'; Â prompt.input.className = css_prefix + '-prompt-input'
Â  Â if (typeof input_default_value != "undefined") prompt.input.value = input_default_value
Â  Â prompt.appendChild (prompt.input)
Â  Â dialog.appendChild (prompt)
Â  }
Â Â 
Â  var buttons = obj.buttons = obj.dialog.buttons = document.createElement ('div'); buttons.className = css_prefix + '-dialog-buttons'
Â  buttons.ok = document.createElement ('button'); buttons.ok.className = css_prefix + '-dialog-buttons-ok'; buttons.ok.innerHTML = ok
Â  if (params.type == 'alert') buttons.appendChild (buttons.ok)
Â  if ((params.type == 'prompt') || (params.type == 'confirm')) {
Â  Â buttons.cancel = document.createElement ('button'); buttons.cancel.className = css_prefix + '-dialog-buttons-cancel'; buttons.cancel.innerHTML = cancel
Â  Â if (params.reverse_buttons) {
Â  Â  buttons.appendChild (buttons.cancel); buttons.appendChild (buttons.ok)
Â  Â } else {
Â  Â  buttons.appendChild (buttons.ok); buttons.appendChild (buttons.cancel)
Â  Â }
Â  }
Â  dialog.appendChild (buttons)
Â Â 
Â  // Append any extra CSS styles on any part of the structure.
Â  for (var current_structure_name in custom_css) {
Â  Â var property_array = current_structure_name.split (".")
Â  Â var current_element = obj
Â  Â property_array.forEach (function (current_property) {current_element = current_element[current_property]})
Â  Â var current_class_list = custom_css[current_structure_name]
Â  Â if (typeof current_class_list == "string") current_class_list = [current_class_list]
Â  Â current_class_list.forEach (function (current_classname) {current_element.classList.add (current_classname)})
Â  }
Â Â 
Â  if (typeof params.callback != "function") params.callback = function () {}
Â  obj.params = params
Â  smoke['finishbuilding_' + params.type] (obj, params)
Â  if ((typeof obj.prompt != "undefined") && (autofocus != false)) obj.prompt.input.focus ()
Â Â 
Â  // Add a mutation observer that observes for the object's removal. If it is removed, destroy the listeners and run smoke.window_closed.
Â  if (observe_mutation) {
Â  Â var MutationObserver = window.MutationObserver || window.WebkitMutationObserver
Â  Â if (typeof MutationObserver != "undefined") {
Â  Â  var observer = new MutationObserver (function (mutation_list) {
Â  Â  Â for (var i = 0, curlen_i = mutation_list.length; i < curlen_i; i++) {
Â  Â  Â  var mutation_item = mutation_list[i]
Â  Â  Â  if (mutation_item.type != 'childList') return
Â  Â  Â  for (var j = 0, curlen_j = mutation_item.removedNodes.length; j < curlen_j; j++) {
Â  Â  Â  Â if (mutation_item.removedNodes[j] != obj) continue
Â  Â  Â  Â if ((!window_closed_ran) && smoke.window_closed) {smoke.window_closed (obj, text, params); window_closed_ran = true}
Â  Â  Â  Â obj.destroy_listeners (observer)
Â  Â  Â  Â return
Â  Â  Â  }
Â  Â  Â }
Â  Â  })
Â  Â  observer.observe (parent, {attributes: false, childList: true, subtree: false})
Â  Â }
Â  }
Â Â 
Â  if (smoke.window_opened) smoke.window_opened (obj, text, params)
Â Â 
Â  return obj
Â }
Â 
Â smoke.finishbuilding_alert Â  = function (obj) {
Â  obj.callback_ok = function () {obj.params.callback ()}
Â  obj.destroy_listeners = function (observer) {if (observer) observer.disconnect (); document.removeEventListener ('keyup', ok_function_wrapper)}
Â  var ok_function_wrapper = obj.ok = function (evt) {ok_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener (obj.params.point_event, ok_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj = obj
Â }
Â smoke.finishbuilding_confirm = function (obj) {
Â  obj.callback_ok Â  Â  = function () {obj.params.callback (true)}
Â  obj.callback_cancel = function () {obj.params.callback (false)}
Â  obj.destroy_listeners = function (observer) {
Â  Â if (observer) observer.disconnect ()
Â  Â document.removeEventListener ('keyup', ok_function_wrapper)
Â  Â document.removeEventListener ('keyup', cancel_function_wrapper)
Â  }
Â  var ok_function_wrapper Â  Â  = obj.ok Â  Â  = function (evt) {ok_function Â  Â (evt, obj)}
Â  var cancel_function_wrapper = obj.cancel = function (evt) {cancel_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener Â  Â  (obj.params.point_event, ok_function_wrapper)
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', cancel_function_wrapper)
Â  obj.buttons.cancel.addEventListener (obj.params.point_event, cancel_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj Â  Â  = obj
Â  obj.buttons.cancel.smoke_pure_obj = obj
Â }
Â smoke.finishbuilding_prompt Â = function (obj) {
Â  obj.callback_ok Â  Â  = function () {obj.params.callback (obj.prompt.input.value)}
Â  obj.callback_cancel = function () {obj.params.callback (false)}
Â  obj.destroy_listeners = function (observer) {
Â  Â if (observer) observer.disconnect ()
Â  Â document.removeEventListener ('keyup', ok_function_wrapper)
Â  Â document.removeEventListener ('keyup', cancel_function_wrapper)
Â  }
Â  var ok_function_wrapper Â  Â  = obj.ok Â  Â  = function (evt) {ok_function Â  Â (evt, obj)}
Â  var cancel_function_wrapper = obj.cancel = function (evt) {cancel_function(evt, obj)}
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', ok_function_wrapper)
Â  obj.buttons.ok.addEventListener Â  Â  (obj.params.point_event, ok_function_wrapper)
Â  document.addEventListener Â  Â  Â  Â  Â  ('keyup', cancel_function_wrapper)
Â  obj.buttons.cancel.addEventListener (obj.params.point_event, cancel_function_wrapper)
Â  obj.buttons.ok.smoke_pure_obj Â  Â  = obj
Â  obj.buttons.cancel.smoke_pure_obj = obj
Â }
Â 
Â function ok_function (evt, obj) {
Â  if (evt && (((evt.type == "keyup") && (typeof evt.keyCode != "undefined")) && ((evt.keyCode == 0) || (evt.keyCode != 13)))) return
Â  obj.destroy_listeners ()
Â  if (obj.parentNode) obj.parentNode.removeChild (obj)
Â  obj.callback_ok ()
Â }
Â function cancel_function (evt, obj) {
Â  if (evt && (((evt.type == "keyup") && (typeof evt.keyCode != "undefined")) && ((evt.keyCode == 0) || (evt.keyCode != 27)))) return
Â  obj.destroy_listeners ()
Â  if (obj.parentNode) obj.parentNode.removeChild (obj)
Â  obj.callback_cancel ()
Â }
Â 
Â smoke.action_list = [{name : 'alert'}, {name : 'confirm'}, {name : 'prompt'}]
Â 
Â for (var i = 0; i < smoke.action_list.length; i++) {
Â  void function (current_action) {
Â  Â smoke[current_action] = function (text, callback, params) {return smoke.build (text, merge_objects ({callback: callback, type: current_action}, params))}
Â  } (smoke.action_list[i].name)
Â }
Â 
Â function merge_objects (secondary, primary) {
Â  // The primary object's duplicate keys are superior. The secondary object's duplicate keys are inferior.
Â  if (typeof secondary == "undefined") var primary = primary.primary, secondary = primary.secondary
Â  var new_object = {}
Â  for (var property in secondary) {new_object[property] = secondary[property]}
Â  for (var property in primary) Â  {new_object[property] = primary Â [property]}
Â  return new_object
Â }
Â 
Â if (typeof module != 'undefined' && module.exports) {
Â  module.exports = smoke
Â } else if (typeof define === 'function' && define.amd) {
Â  define ('smoke', [], function() {return smoke})
Â } else {
Â  this.smoke = smoke
Â }
} ()
//ÃÃ¡Ã»Ã·Ã­Ã»Ã© alert
smoke.alert ("Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ²Ñ€Ğ°Ğ³Ğ¾Ğ² Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ñ‹ Ğ½Ğ° 20%");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 11) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 12) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 13) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 14) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 15) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (lvl == 16) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 17) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 18) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 6]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (lvl == 19) {
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 4, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width - (c.width / 4), c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 2, c.height / 5]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 2]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 2, c.height / 8]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 4, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemybasichp, [c.width / 5, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 10, c.height / 4]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemyttankhp, [c.width / 10, c.height / 6]);
Â  Â  Â  Â  Â  Â  Â  Â  deployEnemy(enemylighthp, [c.width / 3, c.height / 4]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  firstwave = true;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  if (Math.floor(gameTime) == enemydep * (99999999 - lvl))
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  deployEnemy(enemybasic, [getRandom(30, c.width - 30), getRandom(-20, - 40)]);
Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [getRandom(30, c.width - 30), getRandom(-20, - 40) - (k * 2)]);
Â  Â  Â  Â  Â  Â  deployEnemy(enemylight, [getRandom(30, c.width - 30), getRandom(-20, - 40) - (k * 2)]);
Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [getRandom(30, c.width - 30), getRandom(-20, - 40) - (k * 4)]);
Â  Â  Â  Â  Â  Â  deployEnemy(enemyttank, [getRandom(30, c.width - 30), getRandom(-20, - 40) - (k * 4)]);
Â  Â  Â  Â  Â  Â  enemydep++;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  Â Â Â Â updateEntities(dt, units);
Â  Â  Â  Â  updateEntities(dt, enemies);
Â  Â  Â  Â  updateBullets(dt);
Â  Â  Â  Â  updateIcons(dt);

Â  Â  Â  Â  Â Â //Â Â Â checkCollisions();

Â  Â  };

Â  Â  function updateIcons(dt)
Â  Â  {

Â  Â  Â  Â  for (i = 0; i < icons.length; i++)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  if (icons[i].pos[1] > icons[i].defaultpos[1] && icons[i].respawn == true)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  icons[i].pos[1] -= icons[i].respawnrate * k * dt;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  icons[i].respawn = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  };

Â  Â  function updateEntities(dt, list)
Â  Â  {

Â  Â  Â  Â  Â Â Â Â Â // Update the tank position


Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  for (var i = 0; i < list.length; i++)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  var u = list[i];
Â  Â  Â  Â  Â  Â  var u2;

Â  Â  Â  Â  Â  Â  list == units ? u2 = enemies : u2 = units;


Â  Â  Â  Â  Â  Â  u.time = u.time + dt || 0;
Â  Â  Â  Â  Â  Â  u.lastshot = u.lastshot + dt || 0;
Â  Â  Â  Â  Â  Â  u.avoidCollision(list, i, dt);
Â  Â  Â  Â  Â  Â  //removeÂ 
Â  Â  Â  Â  Â  Â  if (u.destroyed)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  list.splice(i, 1);
Â  Â  Â  Â  Â  Â  Â  Â  i--;
Â  Â  Â  Â  Â  Â  Â  Â  if (list == units)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  counter++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  counter2++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else if (list == enemies && u.pos[1] > c.height - (c.width / 4 + 2 * k))
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  isGameOver = true;
Â  Â  Â  Â  Â  Â  Â  Â  gameOver('loss');
Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else if (
Â  Â  Â  Â  Â  Â  list == units && u.pos[1] < k * 2)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  isGameOver = true;
Â  Â  Â  Â  Â  Â  Â  Â  gameOver('win');
Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (u.status == "acceleration" && u.speed < u.maxspeed)
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  u.speed += 15 * dt;
Â  Â  Â  Â  Â  Â  Â  Â  switch (list)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  case units:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (u.angle < u.defaultangle)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle += Math.floor(80 * dt * u.dir);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (u.angle > u.defaultangle)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle -= Math.floor(80 * dt * u.dir);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case enemies:

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang = u.defaultangle;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (u.cang < -90)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang += 180;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (u.cang > -90)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang -= 180;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (u.cang < u.angle)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle -= Math.floor(75 * dt);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (u.cang > u.angle)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle += Math.floor(75 * dt);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (u.time > 1 && !u.target && u.pos[1] > k)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  u.findTarget(u2);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (u.target && u.target.destroyed)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  u.status = 'acceleration';
Â  Â  Â  Â  Â  Â  Â  Â  delete u.target;

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else if (u.status == "targetfound" && !u.target.destroyed)
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  if (u.speed > 0)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.speed -= u.maxspeed * 2 * dt;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.speed = 0
Â  Â  Â  Â  Â  Â  Â  Â  }


Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang = Math.floor(u.getAngle(u.target.pos));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (list == enemies ) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (u.cang < -90)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang += 180;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (u.cang > -90)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.cang -= 180;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (u.cang > u.angle && u.cang < u.angle + 3)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle = u.cang;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (u.cang > u.angle )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle += Math.floor(150 * dt);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (u.cang < u.angle && u.cang > u.angle - 3)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle = u.cang;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (u.cang < u.angle )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.angle -= Math.floor(150 * dt);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â Â 


Â  Â  Â  Â  Â  Â  Â  Â  if (u.lastshot > u.reload && Math.floor(u.angle) == Math.floor(u.cang) && u.getDistance(u.target) < u.range)
Â  Â  Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  u.fireOnTarget();

Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â u.findTarget(u2);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (u.time > 0.7 && u.speed > 0)
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  u.moveAhead(dt);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  };

Â  Â  }

Â  Â  function updateBullets(dt)
Â  Â  {

Â  Â  Â  Â  // Update all the explosions

Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  for (var i = 0; i < explosions.length; i++)
Â  Â  Â  Â  {Â Â Â Â Â Â Â Â explosions[i].sprite.update(dt);

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â // Remove if animation is done
Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  if (explosions[i].sprite.done)
Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â Â Â Â explosions.splice(i, 1);Â Â Â Â Â Â Â Â Â Â Â Â i--;Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  }Â Â Â Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  Â Â Â Â Â // Update all the bullets

Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  for (var i = 0; i < bullets.length; i++)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  var b = bullets[i];

Â  Â  Â  Â  Â  Â  var rad = b.angle / (180 / Math.PI);
Â  Â  Â  Â  Â  Â  b.pos[0] += Math.cos(rad) * b.speed * dt * b.dir;
Â  Â  Â  Â  Â  Â  b.pos[1] += Math.sin(rad) * b.speed * dt * b.dir;


Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Remove the bullet

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  if (b.pos[1] < b.target.pos[1] + k && b.pos[1] > b.target.pos[1] - k && b.pos[0] < b.target.pos[0] + k && b.pos[0] > b.target.pos[0] - k)
Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â bullets.splice(i, 1);Â Â Â Â Â Â Â Â Â i--;Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (b.target.hp >= 0 && !b.target.destroyed)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.target.hp -= b.damage;Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (b.target.hp < 0)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.target.destroyed = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.target.hp = 0;Â Â // Add an explosion
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â explosions.push(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â pos: b.target.pos,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sprite: new Sprite("https://hsto.org/webt/f1/fb/m2/f1fbm2uydhk96r1syq2f_jxv3om.png", [0, 117], Â Â [39, 39], [k * 3.2, k * 3.2], 14, Â Â [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], Â null, Â true)Â Â Â Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }Â Â Â Â Â Â Â Â 
Â  Â  Â  Â  }Â 

Â  Â  Â  Â  Â Â 
Â  Â  }

Â  Â  function render()
Â  Â  {

Â  Â  Â  Â  if (!isGameOver)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  renderArea(ctx);
Â  Â  Â  Â  Â  Â  renderEntities(enemies);
Â  Â  Â  Â  Â  Â  renderEntities(units);
Â  Â  Â  Â  Â  Â  renderBullets();
Â  Â  Â  Â  Â  Â  renderEntities(explosions);

Â  Â  Â 
Â  Â  Â  Â  }
Â  Â  };
//Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ
Â  Â  function renderArea(ctx) Â {
Â  Â Â 
Â  Â  ctx.globalAlpha = 0.5;
Â  Â  Â  Â Â 
Â  Â  for (x = 0;x * 102 < c.width;x++) {
Â  Â  Â  Â  for (y = 0;y * 102 < c.height;y++) { ctx.drawImage(resources.get('https://hsto.org/webt/ti/r4/sh/tir4shtincszw4peazx3f6znvn4.png'), 0, 0, 512, 512, x*102, y*102,102,102);
Â  Â  Â  Â  }
Â  Â  }
Â  Â  ctx.globalAlpha = 1;
Â  Â ctx.fillStyle = "rgba(250,250,250,0.19)";
Â  Â  Â  Â  ctx.fillRect(0, 0, c.width, c.height );
Â  Â  Â  Â  ctx.fillStyle = "rgba(50,200,50,0.9)";
Â  Â  Â  Â  ctx.fillRect(0, 0, c.width, c.height / 20);
Â  Â  Â  Â  ctx.fillStyle = " rgba(200,50,50,0.7)";
Â  Â  Â  Â  ctx.fillRect(0, c.height - c.width / 4 - c.height / 20, c.width, c.height / 20);
Â  Â  Â  Â  ctx.fontÂ =Â c.height / 26 + "px Arial";
Â  Â  Â  Â  ctx.fillStyle = " rgba(250,250,250,0.7)";
Â  Â  Â  Â Â 
ctx.fillText("ĞŸÑ€Ğ¾Ñ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹",Â c.width/500,Â c.height/24); Â  Â  Â  Â  Â  Â  Â 

Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  for (var x = c.width / 4; x < c.width; x += c.width / 4)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  ctx.moveTo(x + 0.1, c.height - c.width / 4);
Â  Â  Â  Â  Â  Â  ctx.lineTo(x + 0.1, c.height);
Â  Â  Â  Â  };

Â  Â  Â  Â  ctx.moveTo(0, c.height - c.width / 4);
Â  Â  Â  Â  ctx.lineTo(c.width, c.height - c.width / 4);
Â  Â  Â  Â  ctx.closePath();
Â  Â  Â  Â  ctx.strokeStyle = "#eee";
Â  Â  Â  Â  ctx.stroke();

Â  Â  Â  Â  if (deployarea === true)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  drawDeployArea();
Â  Â  Â  Â  }

Â  Â  Â 
Â  Â  };

Â  Â  function drawDeployArea()
Â  Â  {
Â  Â  Â  Â Â 
Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  ctx.rect(c.width / 100 -2, c.height / 2 -2, c.width - c.width / 100 - 3 +4, c.height / 3.7 +4);
Â  Â  Â  Â  ctx.strokeStyle = "darkgreen";
Â  Â  Â  Â  Â ctx.closePath();
Â  Â  Â  Â  ctx.stroke();
Â  Â  Â  Â Â 
Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  ctx.rect(c.width / 100, c.height / 2, c.width - c.width / 100 - 3, c.height / 3.7);
Â  Â  Â  Â  ctx.strokeStyle = "white";
Â  Â  Â  Â  ctx.closePath();
Â  Â  Â  Â  ctx.stroke();


Â  Â  }

Â  Â  function drawTrLights()
Â  Â  {

Â  Â  Â  Â  for (i = 0; i < icons.length; i++)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  if (icons[i].respawn == true || !icons[i].active)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = "red";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = "green";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ctx.fillRect(c.width / 4.8 + c.width / 4 * i, c.height - c.width / 4.1, c.width / 30, c.width / 30);
Â  Â  Â  Â  };
Â  Â  };

Â  Â Â 
Â  Â  function renderEntities(list)
Â  Â  {

Â  Â  Â  Â  Â Â Â Â 
Â  Â  Â  Â  for (var i = 0; i < list.length; i++)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â Â Â Â Â Â Â Â renderEntity(list[i]);Â Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  drawTrLights();
Â  Â  Â  Â  drawIcons(icons);
Â  Â  Â  Â Â 
Â  Â  }
Â  Â Â 
Â  Â  function renderBullets() {
Â  Â  Â  Â  for (var i = 0; i < bullets.length; i++)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â Â Â ctx.save();
Â  Â  Â  Â  Â 
Â  Â  Â  Â  ctx.fillStyle = "black";
Â  Â  Â  Â  Â ctx.beginPath ();
Â  Â  Â  Â  Â ctx.arc(bullets[i].pos[0], bullets[i].pos[1], 1 + bullets[i].damage/300, 0, 2*Math.PI) ;
Â  Â  Â  Â  ctx.fill();
Â  Â  Â  Â  Â  Â ctx.restore();
Â  Â  Â  Â  }
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  }
Â  Â Â 
Â  Â Â 
Â  Â  function drawIcons(list)
Â  Â  {
Â  Â  Â  Â  for (var i = 0; i < list.length; i++)
Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  if (!list[i].dragable)
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  Â Â Â ctx.save();
Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(list[i].pos[0] + list[i].sprite.resized[0] / 2, list[i].pos[1] + list[i].sprite.resized[1] / 2);
Â  Â  Â  Â  Â  Â  Â  Â  ctx.rotate(Math.PI / 180 * (-90));
Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(-list[i].sprite.resized[0] / 2, - list[i].sprite.resized[1] / 2);
Â  Â  Â  Â  Â  Â  Â  Â  if(!list[i].active) ctx.globalAlpha = 0.2;
Â  Â  Â  Â  Â  Â  Â  Â  list[i].sprite.render(ctx);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  ctx.restore();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â 

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  Â  Â  ctx.save();

Â  Â  Â  Â  Â  Â  Â  Â  if (mouse.down)
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(mouse.x, mouse.y);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(xxx, yyy);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ctx.rotate(Math.PI / 180 * (-90));
Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(-list[i].sprite.resized[0] / 2, - list[i].sprite.resized[1] / 2);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  list[i].sprite.render(ctx);

Â  Â  Â  Â  Â  Â  Â  Â  list[i].pos = [xxx, yyy]

Â  Â  Â  Â  Â  Â  Â  Â  ctx.restore();
Â  Â  Â  Â  Â  Â  }Â Â Â Â 
Â  Â  Â  Â  }
Â  Â  };


Â  Â  function renderEntity(entity)
Â  Â  {


Â  Â  Â  Â  if (!entity.destroyed)
Â  Â  Â  Â  {Â Â Â Â ctx.save();
Â  Â  Â  Â  Â  Â  ctx.translate(entity.pos[0], entity.pos[1]);

Â  Â  Â  Â  Â  Â  if (entity.time && entity.time < 0.7)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  ctx.scale(1.9 - entity.time * entity.time * 1.7, 1.9 - entity.time * entity.time * 1.7);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  ctx.rotate(Math.PI / 180 * (entity.angle));

Â  Â  Â  Â  Â  Â  ctx.translate(-entity.sprite.resized[0] / 2, - entity.sprite.resized[1] / 2);

Â  Â  Â  Â  Â  Â  Â entity.sprite.render(ctx);
Â  Â  Â  Â  Â  Â  renderHP(entity);Â Â ctx.restore();
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function renderHP(entity)
Â  Â  {

Â  Â  Â  Â  if (entity.time > 0.8)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  var hp = entity.hp * 100 / entity.maxhp;
Â  Â  Â  Â  Â  Â  if (hp < 0) hp = 0;
Â  Â  Â  Â  Â  Â  if (entity.dir < 0)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  var reverse = entity.sprite.resized[0];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  var reverse = 0;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  Â  Â  ctx.lineWidth = k / 2.5;
Â  Â  Â  Â  Â  Â  ctx.lineCap = "round";
Â  Â  Â  Â  Â  Â  ctx.strokeStyle = "black";
Â  Â  Â  Â  Â  Â  ctx.moveTo(0 + reverse, 0);
Â  Â  Â  Â  Â  Â  ctx.lineTo(0 + reverse, entity.sprite.resized[1]);
Â  Â  Â  Â  Â  Â  ctx.stroke();


Â  Â  Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  Â  Â  ctx.lineWidth = k / 3.2;
Â  Â  Â  Â  Â  Â  ctx.lineCap = "round";
Â  Â  Â  Â  Â  Â  ctx.strokeStyle = "lightgrey";
Â  Â  Â  Â  Â  Â  ctx.moveTo(0 + reverse, 0);
Â  Â  Â  Â  Â  Â  ctx.lineTo(0 + reverse, entity.sprite.resized[1]);
Â  Â  Â  Â  Â  Â  ctx.stroke();

Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  ctx.lineWidth = k / 4;

Â  Â  Â  Â  Â  Â  ctx.lineCap = "round";
Â  Â  Â  Â  Â  Â  ctx.strokeStyle = "rgb(" + Math.floor(100 - hp * 2.56) + "," + Math.floor(hp * 2.56) + ",0)";
Â  Â  Â  Â  Â  Â  ctx.moveTo(0 + reverse, 0);
Â  Â  Â  Â  Â  Â  ctx.lineTo(0 + reverse, hp / 100 * entity.sprite.resized[1]);
Â  Â  Â  Â  Â  Â  ctx.stroke();
Â  Â  Â  Â  Â  Â  ctx.lineWidth = 1;
Â  Â  Â  Â  }
Â  Â  }

};


/////////////^^^^^^^^^^^^^^////////////

var requestAnimFrame = (function ()
{

Â  Â  Â Â Â Â 
Â  Â  return window.requestAnimationFrame ||

Â  Â  Â Â Â Â Â Â Â Â window.webkitRequestAnimationFrame ||

Â  Â  Â Â Â Â Â Â Â Â window.mozRequestAnimationFrame ||

Â  Â  Â Â Â Â Â Â Â Â window.oRequestAnimationFrame ||

Â  Â  Â Â Â Â Â Â Â Â window.msRequestAnimationFrame ||

Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  function (callback)
Â  Â  {

Â  Â  Â  Â  Â Â Â Â Â Â Â Â Â Â Â Â window.setTimeout(callback, 1000 / 60);

Â  Â  Â  Â  Â Â Â Â Â Â Â Â 
Â  Â  };
})();

///^^^^^^^///////////^^^^/////////

function loader()
{

Â  Â  var maindiv = document.getElementById("main");
Â  Â Â 
Â  Â Â 


Â  Â  maindiv.innerHTML = '<button id="start" onclick="startGame ()">ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ</button><br><button id="info" onclick="inf()">ĞšĞ°Ğº Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ?</button><br/><span class="dif">Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</span><span class="dif" >' + dif[lvl] + ' Â </span>';

Â  Â  lastTime = Date.now();

};
//////////////////////////////////

(function ()
{
Â  Â  var resourceCache = {};
Â  Â  var loading = [];
Â  Â  var readyCallbacks = [];
Â  Â  // Load an image url or an array of image urls
Â  Â  function load(urlOrArr)
Â  Â  {
Â  Â  Â  Â  if (urlOrArr instanceof Array)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  urlOrArr.forEach(function (url)
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  _load(url);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  else
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  _load(urlOrArr);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function _load(url)
Â  Â  {
Â  Â  Â  Â  if (resourceCache[url])
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  return resourceCache[url];
Â  Â  Â  Â  }
Â  Â  Â  Â  else
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  var img = new Image();
Â  Â  Â  Â  Â  Â  img.onload = function ()
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  resourceCache[url] = img;
Â  Â  Â  Â  Â  Â  Â  Â  if (isReady())
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  readyCallbacks.forEach(function (func)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  func();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  resourceCache[url] = false;
Â  Â  Â  Â  Â  Â  img.src = url;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function get(url)
Â  Â  {
Â  Â  Â  Â  return resourceCache[url];
Â  Â  }
Â  Â  function isReady()
Â  Â  {
Â  Â  Â  Â  var ready = true;
Â  Â  Â  Â  for (var k in resourceCache)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  if (resourceCache.hasOwnProperty(k) && !resourceCache[k])
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  ready = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  return ready;
Â  Â  }

Â  Â  function onReady(func)
Â  Â  {
Â  Â  Â  Â  readyCallbacks.push(func);
Â  Â  }
Â  Â  window.resources =
Â  Â  {
Â  Â  Â  Â  load: load,
Â  Â  Â  Â  get: get,
Â  Â  Â  Â  onReady: onReady,
Â  Â  Â  Â  isReady: isReady
Â  Â  };
})();

resources.load([

"https://hsto.org/webt/s1/qb/ew/s1qbew-nghf2pt2t1eucftw3yko.png",

"https://hsto.org/webt/f1/fb/m2/f1fbm2uydhk96r1syq2f_jxv3om.png",

"https://hsto.org/webt/ti/r4/sh/tir4shtincszw4peazx3f6znvn4.png"
]);

resources.onReady(loader);

Â  Â  Â  </script>
Â  Â  </head>
<body>
Â  Â  Â  Â <div id="main">
Â  Â  Â  Â  Â  <progress class="progress"> </progress>Â 
Â  Â  Â  Â </div>
Â  Â  Â  <div id="infdiv">ĞŸĞµÑ€ĞµÑÑ‚Ğ°ÑĞºĞ¸Ğ²Ğ°Ğ¹ ÑĞ²Ğ¾Ğ¸ Ñ‚Ğ°Ğ½ĞºĞ¸ Ğ² Ğ¸Ğ³Ñ€Ğ¾Ğ²ÑƒÑ Ğ·Ğ¾Ğ½Ñƒ.<br/><br/>Ğ¢Ñ‹ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ğ°ĞµÑˆÑŒ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ñ‚Ğ²Ğ¾Ğ¸Ñ… Ñ‚Ğ°Ğ½ĞºĞ¾Ğ² ĞºĞ¾ÑĞ½ĞµÑ‚ÑŒÑÑ Ğ·ĞµĞ»ĞµĞ½Ğ¾Ğ¹ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ² Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¿Ğ¾Ğ»Ñ<br/><br/>ĞĞµ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞ¹ Ğ²Ñ€Ğ°Ğ¶ĞµÑĞºĞ¸Ğ¼ Ñ‚Ğ°Ğ½ĞºĞ°Ğ¼ Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒÑÑ Ñ‚Ğ¾ Ñ‚Ğ²Ğ¾ĞµĞ¹ Ğ±Ğ°Ğ·Ñ‹.<br/><br/>Ğ£Ğ´Ğ°Ñ‡Ğ¸, Ñ‚Ğ°Ğ½ĞºÑ‚Ğ¸ÑÑ‚! ĞŸÑƒÑÑ‚ÑŒ Ğ²ĞµĞ·ĞµĞ½Ğ¸Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ½Ğ° Ñ‚Ğ²Ğ¾ĞµĞ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğµ.</div>
Â  Â  Â  Â <div id="log"></div>
Â  Â  Â  Â 
Â  Â  Â  Â <div id="myModal" class="modal">
Â  Â  Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="close">&times;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â <p class="modal-text"></p>
Â  Â  Â  </div>
Â  Â </div>Â 
Â  Â 
</body>
</html>


